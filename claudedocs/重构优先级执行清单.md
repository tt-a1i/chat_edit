# é‡æ„ä¼˜å…ˆçº§æ‰§è¡Œæ¸…å•

> **å¿«é€Ÿå‚è€ƒ**: æŒ‰ä¼˜å…ˆçº§æ’åºçš„é‡æ„ä»»åŠ¡æ¸…å•
> **å®Œæ•´æŠ¥å‘Š**: å‚è§ `é‡æ„ä¼˜åŒ–æŠ¥å‘Š-æ›´æ–°ç‰ˆ.md`

---

## ğŸ¯ å½“å‰é¡¹ç›®å¥åº·åº¦: 72/100 (+12)

### æ”¹è¿›äº®ç‚¹
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†ç³»ç»Ÿå·²å®Œæˆ
- âœ… Pinia çŠ¶æ€ç®¡ç†ç»Ÿä¸€
- âœ… ESLint è§„åˆ™ä¼˜åŒ–ï¼ˆä» 100+ é”™è¯¯é™è‡³ 65 è­¦å‘Šï¼‰
- âœ… Git hooks å’Œè‡ªåŠ¨æ ¼å¼åŒ–

---

## ğŸ“‹ ç«‹å³è¡ŒåŠ¨ï¼ˆæœ¬å‘¨ï¼‰

### ğŸ”´ P0: å†…å­˜æ³„æ¼ä¿®å¤ï¼ˆ0.5äººå¤©ï¼‰
**é—®é¢˜**: 15+ ä¸ªæœªæ¸…ç†çš„äº‹ä»¶ç›‘å¬å™¨
**å½±å“**: é•¿æ—¶é—´ä½¿ç”¨å¯¼è‡´å†…å­˜ç´¯ç§¯

**ä»»åŠ¡**:
- [ ] å®¡è®¡æ‰€æœ‰ `addEventListener` è°ƒç”¨
- [ ] ä½¿ç”¨ VueUse çš„ `useEventListener` æ›¿æ¢
- [ ] åœ¨ `onBeforeUnmount` ä¸­éªŒè¯æ¸…ç†é€»è¾‘
- [ ] Chrome DevTools Memory Profiler éªŒè¯

**æ–‡ä»¶**: `src/components/AIEditing/index.vue`

**éªŒæ”¶**: å¤šæ¬¡è¿›å…¥é€€å‡ºé¡µé¢åï¼Œå†…å­˜ä¸æŒç»­å¢é•¿

---

### ğŸ”´ P0: è¶…å¤§ç»„ä»¶æ‹†åˆ†ï¼ˆ3äººå¤©ï¼‰
**é—®é¢˜**: `AIEditing/index.vue` 1,194è¡Œï¼Œ`util.ts` 1,122è¡Œ
**å½±å“**: ç»´æŠ¤å›°éš¾ã€æµ‹è¯•å›°éš¾ã€åä½œå†²çª

**é˜¶æ®µ1: index.vue æ‹†åˆ†** (2äººå¤©)
- [ ] åˆ›å»º `composables/useQuillEditor.ts`
- [ ] åˆ›å»º `composables/useAIPrompt.ts`
- [ ] åˆ›å»º `composables/useDiffEditor.ts`
- [ ] æå– `QuillEditor.vue` ç»„ä»¶
- [ ] æå– `AIPromptPanel.vue` ç»„ä»¶
- [ ] æå– `AIResponsePanel.vue` ç»„ä»¶
- [ ] æå– `DiffEditorPanel.vue` ç»„ä»¶

**éªŒæ”¶**: `index.vue` å‡å°‘è‡³ 200è¡Œä»¥ä¸‹ï¼Œæ‰€æœ‰åŠŸèƒ½æ­£å¸¸

**é˜¶æ®µ2: util.ts æ‹†åˆ†** (1äººå¤©)
- [ ] åˆ›å»º `utils/quillOperations.ts`
- [ ] åˆ›å»º `utils/diffEditor.ts`
- [ ] åˆ›å»º `utils/aiInteraction.ts`
- [ ] åˆ›å»º `utils/uiHelpers.ts`
- [ ] æ›´æ–°æ‰€æœ‰å¯¼å…¥è·¯å¾„

**éªŒæ”¶**: å•æ–‡ä»¶ä¸è¶…è¿‡ 250è¡Œ

---

### ğŸ”´ P1: ESLint æ¸…ç†ï¼ˆ0.5äººå¤©ï¼‰
**é—®é¢˜**: 4 å¤„ eslint-disableï¼Œ9 å¤„æœªä½¿ç”¨å˜é‡

**ä»»åŠ¡**:
- [ ] åˆ é™¤ `const table = null` (index.vue:40)
- [ ] å¤„ç† `posCloseToBottom` (index.vue:46)
- [ ] ä¿®å¤ monaco å¯¼å…¥æ–¹å¼ (monacoConfig.ts:6)
- [ ] æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„å˜é‡å’Œå¯¼å…¥

**éªŒæ”¶**: ESLint è­¦å‘Šä» 65 é™è‡³ 20 ä»¥ä¸‹

---

## ğŸ“‹ è¿‘æœŸè§„åˆ’ï¼ˆ2-3å‘¨ï¼‰

### ğŸŸ¡ P1: TypeScript `any` æ¶ˆé™¤ï¼ˆ1.5äººå¤©ï¼‰
**é—®é¢˜**: 44 ä¸ª `any` ç±»å‹ä½¿ç”¨

**ä¼˜å…ˆä¿®å¤**:
- [ ] `api/api.ts` (3å¤„)
- [ ] `services/useAI.ts` (3å¤„)
- [ ] `components/AIEditing/api.ts` (2å¤„)
- [ ] `components/AIEditing/export.ts` (7å¤„)

**éªŒæ”¶**: `any` ä½¿ç”¨é™è‡³ 15 ä»¥ä¸‹ï¼ˆä»…ä¿ç•™ç¬¬ä¸‰æ–¹åº“å®šä¹‰ï¼‰

---

### ğŸŸ¡ P1: TODO æ³¨é‡Šå®æ–½ï¼ˆ1äººå¤©ï¼‰
**é—®é¢˜**: 3 å¤„ TODO æ³¨é‡Šæœªå®æ–½

**ä»»åŠ¡**:
- [ ] `storage.ts:23` - å®ç°æˆ–åˆ é™¤ `saveDraft`
- [ ] `storage.ts:51` - å®ç°æˆ–åˆ é™¤ `loadDraft`
- [ ] `logger.ts:113` - é›†æˆ Sentry ç›‘æ§

**éªŒæ”¶**: æ— æœªå®æ–½çš„ TODO æ³¨é‡Š

---

### ğŸŸ¡ P2: æµ‹è¯•è¦†ç›–ç‡å»ºè®¾ï¼ˆ3äººå¤©ï¼‰
**é—®é¢˜**: å½“å‰æµ‹è¯•è¦†ç›–ç‡ 0%

**é˜¶æ®µ1: å·¥å…·å‡½æ•°å•å…ƒæµ‹è¯•** (1äººå¤©)
- [ ] é…ç½® Vitest
- [ ] `utils/logger.test.ts`
- [ ] `utils/errorHandler.test.ts`
- [ ] `utils/darkMode.test.ts`

**é˜¶æ®µ2: Store å•å…ƒæµ‹è¯•** (1äººå¤©)
- [ ] `stores/chat.test.ts`
- [ ] `stores/app.test.ts`
- [ ] `stores/config.test.ts`

**é˜¶æ®µ3: ç»„ä»¶é›†æˆæµ‹è¯•** (1äººå¤©)
- [ ] `AIEditing.test.ts`
- [ ] `ChatMessages.test.ts`

**éªŒæ”¶**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è¦†ç›–ç‡ 60%+

---

## ğŸ“‹ é•¿æœŸä¼˜åŒ–ï¼ˆ4-5å‘¨ï¼‰

### ğŸŸ¢ P2: æ€§èƒ½ä¼˜åŒ–å®æ–½ï¼ˆ2äººå¤©ï¼‰
**ä»»åŠ¡**:
- [ ] Monaco Editor æ‡’åŠ è½½
- [ ] Quill ç»„ä»¶æ‡’åŠ è½½
- [ ] NaiveUI æŒ‰éœ€å¯¼å…¥
- [ ] å›¾ç‰‡æ‡’åŠ è½½

**ç›®æ ‡**:
- é¦–å±åŠ è½½æ—¶é—´: ~2.5s â†’ <1.5s (-40%)
- åŒ…ä½“ç§¯: ~3MB â†’ <2MB (-33%)
- LCP: ~2.8s â†’ <2.0s (-29%)

---

### ğŸŸ¢ P3: ä¾èµ–åŒ…ä¼˜åŒ–ï¼ˆ0.5äººå¤©ï¼‰
**ä»»åŠ¡**:
- [ ] ç§»é™¤æœªä½¿ç”¨çš„ä¾èµ– (fontawesome, add, html2pdf)
- [ ] `pnpm dedupe` å»é‡
- [ ] Bundle analyzer åˆ†æ

**ç›®æ ‡**: node_modules ä» 865MB é™è‡³ 730MB (-15%)

---

### ğŸŸ¢ P3: å›½é™…åŒ–å®Œå–„ï¼ˆ2äººå¤©ï¼‰
**ä»»åŠ¡**:
- [ ] å®Œå–„ i18n é…ç½®
- [ ] æå–æ‰€æœ‰ç¡¬ç¼–ç æ–‡æœ¬
- [ ] æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢

---

## ğŸ“Š å…³é”®æŒ‡æ ‡è·Ÿè¸ª

| æŒ‡æ ‡ | åŸºçº¿ | å½“å‰ | ç›®æ ‡ | è¿›åº¦ |
|------|------|------|------|------|
| é¡¹ç›®å¥åº·åº¦ | 60 | 72 | 85 | ğŸŸ¡ 84% |
| ESLint è­¦å‘Š | 100+ | 65 | 20 | ğŸŸ¡ 35% |
| `any` ç±»å‹æ•° | 60+ | 44 | 15 | ğŸŸ¡ 66% |
| æµ‹è¯•è¦†ç›–ç‡ | 0% | 0% | 60% | ğŸ”´ 0% |
| é¦–å±åŠ è½½ | 2.5s | 2.5s | 1.5s | ğŸ”´ 0% |
| æœ€å¤§ç»„ä»¶è¡Œæ•° | 1,194 | 1,194 | 200 | ğŸ”´ 0% |

---

## âš¡ æœ¬å‘¨è¡ŒåŠ¨è®¡åˆ’ï¼ˆå»ºè®®ï¼‰

### Day 1-2: å†…å­˜æ³„æ¼ä¿®å¤
1. å®‰è£… `@vueuse/core` (å¦‚æœªå®‰è£…)
2. æ›¿æ¢æ‰€æœ‰ `addEventListener` ä¸º `useEventListener`
3. éªŒè¯æ¸…ç†é€»è¾‘
4. Chrome DevTools éªŒè¯

### Day 3-5: è¶…å¤§ç»„ä»¶æ‹†åˆ†ç¬¬ä¸€é˜¶æ®µ
1. åˆ›å»º 3 ä¸ªæ ¸å¿ƒ composables
2. æå– QuillEditor ç»„ä»¶
3. æå– AIPromptPanel ç»„ä»¶
4. åŠŸèƒ½æµ‹è¯•

### Day 6: ESLint æ¸…ç†
1. ä¿®å¤æ‰€æœ‰ eslint-disable
2. æ¸…ç†æœªä½¿ç”¨å˜é‡
3. è¿è¡Œ `pnpm lint:fix`

---

## ğŸ¯ éªŒæ”¶æ£€æŸ¥è¡¨

**Week 1 å®Œæˆæ ‡å‡†**:
- [ ] Chrome DevTools Memory: æ— å†…å­˜æ³„æ¼
- [ ] ESLint è­¦å‘Š â‰¤ 20
- [ ] `index.vue` è¡Œæ•°å¼€å§‹ä¸‹é™
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ

**Week 2 å®Œæˆæ ‡å‡†**:
- [ ] `AIEditing/index.vue` â‰¤ 200è¡Œ
- [ ] `util.ts` æ‹†åˆ†å®Œæˆ
- [ ] å•å…ƒæµ‹è¯•é…ç½®å®Œæˆ
- [ ] CI é€šè¿‡

**Week 4 å®Œæˆæ ‡å‡†**:
- [ ] `any` ç±»å‹ â‰¤ 15
- [ ] æµ‹è¯•è¦†ç›–ç‡ â‰¥ 60%
- [ ] æ‰€æœ‰ TODO å·²å¤„ç†

---

## ğŸ“ è·å–å¸®åŠ©

- **å®Œæ•´æŠ¥å‘Š**: `claudedocs/é‡æ„ä¼˜åŒ–æŠ¥å‘Š-æ›´æ–°ç‰ˆ.md`
- **é¡¹ç›®æ–‡æ¡£**: `CLAUDE.md`
- **æ¶æ„åˆ†æ**: `claudedocs/` ç›®å½•

**æœ€åæ›´æ–°**: 2025-10-01
